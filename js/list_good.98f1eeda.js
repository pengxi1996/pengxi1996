(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list_good"],{1276:function(t,e,a){"use strict";var r=a("d784"),n=a("44e7"),o=a("825a"),i=a("1d80"),s=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),p=a("d039"),g=[].push,h=Math.min,f=4294967295,m=!p((function(){return!RegExp(f,"y")}));r("split",2,(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=String(i(this)),o=void 0===a?f:a>>>0;if(0===o)return[];if(void 0===t)return[r];if(!n(t))return e.call(r,t,o);var s,l,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,m=new RegExp(t.source,p+"g");while(s=d.call(m,r)){if(l=m.lastIndex,l>h&&(u.push(r.slice(h,s.index)),s.length>1&&s.index<r.length&&g.apply(u,s.slice(1)),c=s[0].length,h=l,u.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return h===r.length?!c&&m.test("")||u.push(""):u.push(r.slice(h)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=i(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n,a):r.call(String(n),e,a)},function(t,n){var i=a(r,t,this,n,r!==e);if(i.done)return i.value;var d=o(t),p=String(this),g=s(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),x=new g(m?d:"^(?:"+d.source+")",v),_=void 0===n?f:n>>>0;if(0===_)return[];if(0===p.length)return null===u(x,p)?[p]:[];var y=0,w=0,D=[];while(w<p.length){x.lastIndex=m?w:0;var k,L=u(x,m?p:p.slice(w));if(null===L||(k=h(c(x.lastIndex+(m?0:w)),p.length))===y)w=l(p,w,b);else{if(D.push(p.slice(y,w)),D.length===_)return D;for(var F=1;F<=L.length-1;F++)if(D.push(L[F]),D.length===_)return D;w=y=k}}return D.push(p.slice(y)),D}]}),!m)},"14c3":function(t,e,a){var r=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),i=a("9112");for(var s in n){var l=r[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{i(c,"forEach",o)}catch(u){c.forEach=o}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("b301");t.exports=n("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1d61":function(t,e,a){"use strict";var r=a("dd61"),n=a.n(r);n.a},2603:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-card",[a("el-alert",{attrs:{title:"添加商品信息",type:"info","show-icon":"",center:""}}),a("el-steps",{attrs:{active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"动态属性"}}),a("el-step",{attrs:{title:"静态属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addFormRef",attrs:{model:t.addFormData,rules:t.addFormRules,"label-width":"100px","label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.tabClicked},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addFormData.goods_name,callback:function(e){t.$set(t.addFormData,"goods_name",e)},expression:"addFormData.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{model:{value:t.addFormData.goods_price,callback:function(e){t.$set(t.addFormData,"goods_price",e)},expression:"addFormData.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{model:{value:t.addFormData.goods_weight,callback:function(e){t.$set(t.addFormData,"goods_weight",e)},expression:"addFormData.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{model:{value:t.addFormData.goods_number,callback:function(e){t.$set(t.addFormData,"goods_number",e)},expression:"addFormData.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:t.cateList,props:{expandTrigger:"hover",label:"cat_name",value:"cat_id"}},on:{change:t.handleChange},model:{value:t.addFormData.goods_cat,callback:function(e){t.$set(t.addFormData,"goods_cat",e)},expression:"addFormData.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"动态属性",name:"1"}},t._l(t.manyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"静态属性",name:"2"}},t._l(t.onlyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item1.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{action:t.uploadBase,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"list-type":"picture",headers:t.headerObj,"on-success":t.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:t.addFormData.goods_introduce,callback:function(e){t.$set(t.addFormData,"goods_introduce",e)},expression:"addFormData.goods_introduce"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.previewDialogVisible,width:"60%"},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[a("img",{staticClass:"previewImg",attrs:{src:t.previewPath,alt:""}})])],1)},n=[],o=(a("4de4"),a("4160"),a("a15b"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("89ba")),i=a("60bb"),s=a.n(i),l={data:function(){return{activeIndex:"0",cateList:[],addFormData:{goods_name:"",goods_cat:[],goods_price:"",goods_number:"",goods_weight:"",pics:[],goods_introduce:"",attrs:[]},addFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},manyTableData:[],onlyTableData:[],uploadBase:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",previewDialogVisible:!1}},methods:{getCateList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("categories");case 2:if(e=t.sent,a=e.data,200==a.meta.status){t.next=6;break}return t.abrupt("return",this.$message.error("获取失败"));case 6:console.log(a.data),this.cateList=a.data;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleChange:function(){3!=this.addFormData.goods_cat.length&&(this.$message.error("只能选三级分类"),this.addFormData.goods_cat=[])},beforeTabLeave:function(t,e){if("0"==e&&3!=this.addFormData.goods_cat.length)return this.$message.error("请选择商品分类"),!1},tabClicked:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"!=this.activeIndex){t.next=10;break}return t.next=3,this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:"many"}});case 3:if(e=t.sent,a=e.data,console.log(a.data),200==a.meta.status){t.next=8;break}return t.abrupt("return",this.$message.error("获取失败"));case 8:a.data.forEach((function(t){t.attr_vals=0==t.attr_vals.length?[]:t.attr_vals.split(",")})),this.manyTableData=a.data;case 10:if("2"!=this.activeIndex){t.next=18;break}return t.next=13,this.$http.get("categories/".concat(this.cateId,"/attributes"),{params:{sel:"only"}});case 13:if(r=t.sent,n=r.data,200==n.meta.status){t.next=17;break}return t.abrupt("return",this.$message.error("获取失败"));case 17:this.onlyTableData=n.data;case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handlePreview:function(t){this.previewPath=t.response.data.url,this.previewDialogVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path;this.addFormData.pics=this.addFormData.pics.filter((function(t){return t.pic!=e})),console.log(this.addFormData)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.addFormData.pics.push(e),console.log(this.addFormData)},add:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",t.$message.error("请填入必填项"));case 2:return r=s.a.cloneDeep(t.addFormData),r.goods_cat=r.goods_cat.join(","),t.manyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals.join(" ")};t.addFormData.attrs.push(a)})),t.onlyTableData.forEach((function(e){var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addFormData.attrs.push(a)})),r.attrs=t.addFormData.attrs,e.next=9,t.$http.post("goods",r);case 9:if(n=e.sent,o=n.data,201==o.meta.status){e.next=13;break}return e.abrupt("return",t.$message.error("添加商品失败"));case 13:t.$message.success("添加商品成功"),t.$router.push("/goods");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},created:function(){this.getCateList()},computed:{cateId:function(){return 3==this.addFormData.goods_cat.length?this.addFormData.goods_cat[2]:null}}},c=l,u=(a("1d61"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"668a45da",null);e["default"]=d.exports},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),o=a("b622"),i=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},6547:function(t,e,a){var r=a("a691"),n=a("1d80"),o=function(t){return function(e,a){var o,i,s=String(n(e)),l=r(a),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?t?s.charAt(l):o:t?s.slice(l,l+2):i-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"77a9":function(t,e,a){"use strict";var r=a("fd70"),n=a.n(r);n.a},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},9263:function(t,e,a){"use strict";var r=a("ad6d"),n=RegExp.prototype.exec,o=String.prototype.replace,i=n,s=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=void 0!==/()??/.exec("")[1],c=s||l;c&&(i=function(t){var e,a,i,c,u=this;return l&&(a=new RegExp("^"+u.source+"$(?!\\s)",r.call(u))),s&&(e=u.lastIndex),i=n.call(u,t),s&&i&&(u.lastIndex=u.global?i.index+i[0].length:e),l&&i&&i.length>1&&o.call(i[0],a,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(i[c]=void 0)})),i}),t.exports=i},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("b301"),s=[].join,l=n!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:l||c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},ac1f:function(t,e,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b301:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!a||!r((function(){a.call(null,e||function(){throw 1},1)}))}},cd85:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getGoodsList},model:{value:t.quertInfo.query,callback:function(e){t.$set(t.quertInfo,"query",e)},expression:"quertInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.toAddGood}},[t._v("添加商品")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodList}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"280px"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.add_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.delGood(e.row.goods_id)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":t.quertInfo.pagenum,"page-sizes":[10,20,30,40],"page-size":t.quertInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],o=(a("96cf"),a("89ba")),i={data:function(){return{quertInfo:{query:"",pagenum:1,pagesize:10},total:null,goodList:[]}},methods:{getGoodsList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("goods",{params:this.quertInfo});case 2:if(e=t.sent,a=e.data,200==a.meta.status){t.next=6;break}return t.abrupt("return",this.$message.error("获取失败"));case 6:this.goodList=a.data.goods,this.total=a.data.total,console.log(a.data.goods);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.quertInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.quertInfo.pagenum=t,this.getGoodsList()},delGood:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.delete("goods/".concat(t));case 2:if(r=a.sent,n=r.data,200==n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("删除失败"));case 6:e.$message.success("删除成功"),e.getGoodsList();case 8:case"end":return a.stop()}}),a)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},toAddGood:function(){this.$router.push("/goods/add")}},created:function(){this.getGoodsList()}},s=i,l=(a("77a9"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"4a50a564",null);e["default"]=c.exports},d784:function(t,e,a){"use strict";var r=a("9112"),n=a("6eeb"),o=a("d039"),i=a("b622"),s=a("9263"),l=i("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var p=i(t),g=!o((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=g&&!o((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!g||!h||"replace"===t&&!c||"split"===t&&!u){var f=/./[p],m=a(p,""[t],(function(t,e,a,r,n){return e.exec===s?g&&!n?{done:!0,value:f.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}})),b=m[0],v=m[1];n(String.prototype,t,b),n(RegExp.prototype,p,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)}),d&&r(RegExp.prototype[p],"sham",!0)}}},dd61:function(t,e,a){},fd70:function(t,e,a){},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=list_good.98f1eeda.js.map